plugins {
    id 'base'
    id 'com.github.node-gradle.node' version '3.1.0'
}

node {
    version = '20.17.0'
    npmVersion = '10.8.2'
    download = true
}

task installDependencies(type: NpmTask) {
    args = ['install']
}

task buildReact(type: NpmTask) {
    args = ['run', 'build']
}

task testReact(type: NpmTask) {
    args = ['test', '--', '--watchAll=false']
}

task startServer(type: Exec) {
    commandLine 'node', 'server/index.js'
}

buildReact.dependsOn installDependencies
testReact.dependsOn installDependencies

build.dependsOn buildReact
check.dependsOn testReact

